---
import MainLayout from '../layouts/MainLayout.astro';

const sections = [
  {
    title: 'Sobre el Vitality Score',
    emoji: 'ğŸ¾',
    questions: [
      {
        q: 'Â¿QuÃ© es el Vitality Score?',
        a: 'Es un indicador de 0 a 100 que resume el estado de bienestar estimado de tu mascota en base a los datos que registras en PetLog. Funciona de forma similar al "Body Battery" de Garmin o el "Recovery Score" de WHOOP, pero adaptado especÃ­ficamente para perros usando referencias veterinarias validadas. No es un diagnÃ³stico: es una brÃºjula para ayudarte a tomar mejores decisiones de cuidado.',
      },
      {
        q: 'Â¿Por quÃ© el score empieza bajo o dice "estimado"?',
        a: 'El score necesita datos para calcularse bien. Cuando acabas de crear la cuenta, muchos pilares no tienen informaciÃ³n suficiente y aparecen como "estimado". A medida que registras peso, vacunas, visitas al vet y alimentaciÃ³n, el score se vuelve mÃ¡s preciso y representativo. Es normal que al principio sea bajo â€” no indica que tu mascota estÃ© mal, sino que el sistema aÃºn estÃ¡ aprendiendo sobre ella.',
      },
      {
        q: 'Â¿QuÃ© significa cada categorÃ­a del score?',
        a: `Las categorÃ­as son:
â€¢ 85â€“100 â€” En excelente forma: los datos registrados apuntan a un estado de salud muy bueno.
â€¢ 70â€“84 â€” Muy buen estado: hay pequeÃ±as oportunidades de mejora.
â€¢ 55â€“69 â€” Buen comienzo: el score mejorarÃ¡ con mÃ¡s registros.
â€¢ 40â€“54 â€” Perfil en construcciÃ³n: faltan datos para un anÃ¡lisis completo.
â€¢ 0â€“39 â€” Comenzando el historial: es el punto de partida para todos.

Ninguna categorÃ­a equivale a "tu mascota estÃ¡ enferma". El score baja principalmente cuando faltan datos, no cuando hay un problema de salud real.`,
      },
      {
        q: 'Â¿El score puede bajar de un dÃ­a para otro?',
        a: 'Puede variar levemente a medida que pasa el tiempo sin nuevos registros (por ejemplo, si pasan meses sin anotar una visita al vet). TambiÃ©n puede mejorar rÃ¡pidamente cuando agregas datos nuevos. Lo importante es la tendencia a lo largo del tiempo, no el nÃºmero exacto de hoy.',
      },
      {
        q: 'Â¿Es un diagnÃ³stico mÃ©dico?',
        a: 'No. El Vitality Score es una herramienta informativa basada en datos que tÃº registras. NingÃºn algoritmo puede reemplazar la exploraciÃ³n fÃ­sica de un veterinario, ni tiene acceso a anÃ¡lisis de sangre, auscultaciÃ³n cardÃ­aca o cualquier examen clÃ­nico real. Ãšsalo como una referencia general para priorizar el cuidado, no como un diagnÃ³stico.',
      },
      {
        q: 'Â¿Por quÃ© el score nunca dice "crÃ­tico"?',
        a: 'Porque ese lenguaje generarÃ­a ansiedad innecesaria. Un score bajo casi siempre significa "faltan datos", no "hay una emergencia". Si tu mascota tiene sÃ­ntomas preocupantes, acude directamente al veterinario â€” el score no estÃ¡ diseÃ±ado para detectar emergencias en tiempo real.',
      },
    ],
  },
  {
    title: 'Los 5 pilares del score',
    emoji: 'ğŸ“Š',
    questions: [
      {
        q: 'Â¿CÃ³mo se calcula el pilar de Peso?',
        a: 'Comparamos el peso registrado con el rango ideal documentado para la raza (fuente: AKC, Pet Obesity Prevention, WSAVA). Si el peso estÃ¡ dentro del Â±5% del ideal, obtienes el puntaje mÃ¡ximo. AdemÃ¡s, analizamos la tendencia: si el peso viene bajando cuando estaba por encima del ideal, eso suma puntos. Si viene subiendo y ya estÃ¡ sobre el lÃ­mite, resta. La penalizaciÃ³n es gradual â€” no hay un corte abrupto.',
      },
      {
        q: 'Â¿CÃ³mo se calcula el pilar de Cuidado Preventivo?',
        a: 'Tiene dos componentes: vacunas (10 pts) y visitas al veterinario (10 pts). Para vacunas, revisamos si estÃ¡n registradas las vacunas core segÃºn AVMA/WSAVA: rabia, parvovirus, moquillo y adenovirus. Para visitas, la Ãºltima registrada hace menos de 12 meses da el puntaje completo. A medida que pasa el tiempo, decae gradualmente. Si no hay datos registrados, el pilar se marca como "estimado" con un puntaje neutro, no como cero.',
      },
      {
        q: 'Â¿QuÃ© es el pilar de Raza y Edad?',
        a: 'Es el pilar de riesgo contextual. Cada raza tiene predisposiciones documentadas (fuente: Gough/Thomas "Breed Predispositions to Disease", VetCompass UK). Usamos esa informaciÃ³n para generar recordatorios personalizados: por ejemplo, los Cavalier King Charles Spaniels mayores de 5 aÃ±os tienen muy alta predisposiciÃ³n cardÃ­aca â€” el pilar lo refleja como una sugerencia de revisiÃ³n, no como una alarma. Si no tienes la raza especificada, el pilar usa valores genÃ©ricos.',
      },
      {
        q: 'Â¿CÃ³mo se mide la Actividad sin un collar o wearable?',
        a: 'La actividad se aproxima usando dos seÃ±ales: la frecuencia de aventuras/salidas registradas en el Ãºltimo mes, y la recencia del Ãºltimo grooming. Es una aproximaciÃ³n, no una mediciÃ³n exacta de pasos o calorÃ­as. A futuro, PetLog podrÃ¡ integrarse con collares GPS o wearables para mayor precisiÃ³n. Por ahora, registrar paseos y salidas â€” aunque sean breves â€” ya aporta al score.',
      },
      {
        q: 'Â¿CÃ³mo funciona el anÃ¡lisis de NutriciÃ³n?',
        a: 'Tiene dos partes: calidad del alimento (Â¿tiene marca registrada? Â¿es veterinario/premium?) y precisiÃ³n de la porciÃ³n. Para la porciÃ³n, usamos la fÃ³rmula MER (Metabolic Energy Requirement) de Purina: 132 Ã— peso_kg^0.75 kcal/dÃ­a. Si la raciÃ³n registrada en gramos se aproxima a esa necesidad calÃ³rica estimada, el puntaje es alto. Si difiere mucho, aparece una sugerencia. Es un estimado â€” la raciÃ³n exacta depende del nivel de actividad y metabolismo individual de cada perro.',
      },
    ],
  },
  {
    title: 'Las recomendaciones y sugerencias',
    emoji: 'ğŸ’¡',
    questions: [
      {
        q: 'Â¿QuÃ© diferencia hay entre una "sugerencia" y un "recordatorio"?',
        a: `En PetLog usamos tres niveles, siempre en tono amable:
â€¢ Sugerencia (naranja): hay algo que vale la pena revisar, como el peso por encima del rango o una raza con predisposiciÃ³n especÃ­fica a cierta edad.
â€¢ Recordatorio (azul): algo rutinario que puede estar prÃ³ximo, como un chequeo anual o el seguimiento en la etapa senior.
â€¢ Tip (gris suave): oportunidad de mejora, como registrar el alimento o anotar mÃ¡s actividades.

Ninguno de los tres es una alarma. Son guÃ­as, no diagnÃ³sticos.`,
      },
      {
        q: 'Â¿Por quÃ© aparece una sugerencia si mi perro estÃ¡ sano?',
        a: 'Las sugerencias se generan en base a datos estadÃ­sticos de poblaciones de perros, no de tu perro en particular. Por ejemplo, si tu Bulldog FrancÃ©s tiene 2 aÃ±os, aparecerÃ¡ una sugerencia sobre salud dental porque estadÃ­sticamente el 80% de los perros tiene algÃºn grado de enfermedad periodontal a esa edad (fuente: Cornell). Eso no significa que tu perro la tenga â€” significa que es un buen momento para preguntarle al vet en la prÃ³xima visita.',
      },
      {
        q: 'Â¿Las sugerencias desaparecen solas?',
        a: 'SÃ­. Las sugerencias se recalculan cada vez que entras a la secciÃ³n de Salud, usando los datos mÃ¡s recientes. Si registras una visita al vet, el recordatorio de chequeo desaparece. Si agregas un grooming, la sugerencia dental se actualiza. El sistema siempre refleja el estado actual de tu historial.',
      },
    ],
  },
  {
    title: 'Datos y privacidad',
    emoji: 'ğŸ”’',
    questions: [
      {
        q: 'Â¿QuÃ© datos son necesarios para el score?',
        a: `El score funciona con datos parciales desde el inicio. Para el score mÃ¡s completo necesitas:
â€¢ Peso actual (o historial de peso)
â€¢ Raza y fecha de nacimiento del perfil
â€¢ Al menos una vacuna registrada
â€¢ Al menos una visita al vet registrada
â€¢ Datos de alimentaciÃ³n (marca + gramos diarios)

Con solo 2 o 3 de estos ya puedes ver un score parcial. El score no se bloquea, sino que se muestra con contexto de cuÃ¡ntos datos estÃ¡n completos.`,
      },
      {
        q: 'Â¿Mis datos se comparten con terceros?',
        a: 'No. Toda la informaciÃ³n que registras en PetLog estÃ¡ almacenada en tu cuenta personal en Supabase con acceso exclusivo a tu usuario. El score se calcula en el servidor al momento de abrir la pÃ¡gina â€” no se envÃ­a a ningÃºn servicio externo ni se usa para entrenar modelos de IA.',
      },
      {
        q: 'Â¿Puedo tener varias mascotas?',
        a: 'SÃ­. PetLog soporta mÃºltiples perros en la misma cuenta. Cada mascota tiene su propio perfil, historial y Vitality Score. Puedes cambiar entre ellas desde el menÃº lateral â€” cada una tiene incluso su propio color de tema para identificarla visualmente.',
      },
    ],
  },
  {
    title: 'Sobre PetLog',
    emoji: 'ğŸ¶',
    questions: [
      {
        q: 'Â¿Para quÃ© sirve PetLog exactamente?',
        a: 'PetLog es tu diario de salud y vida para perros. Centraliza todo lo que necesitas recordar: vacunas, citas al vet, historial de peso, grooming, alimentaciÃ³n, aventuras y viajes. El objetivo es que nunca pierdas informaciÃ³n importante de tu mascota y que puedas llevarla organizada a cualquier cita veterinaria o al cruzar fronteras con tu perro.',
      },
      {
        q: 'Â¿PetLog reemplaza al veterinario?',
        a: 'No, y nunca pretendemos serlo. PetLog es una herramienta de registro y seguimiento. El veterinario sigue siendo indispensable para diagnÃ³sticos, tratamientos y decisiones mÃ©dicas. Lo que PetLog sÃ­ puede hacer es ayudarte a llegar a esas citas con informaciÃ³n mÃ¡s organizada y completa.',
      },
      {
        q: 'Â¿HabrÃ¡ app para iPhone y Android?',
        a: 'SÃ­, estÃ¡ en el roadmap. La versiÃ³n web actual ya estÃ¡ diseÃ±ada para ser completamente mobile-friendly (funciona muy bien desde el navegador del celular). La app nativa para iOS y Android usarÃ¡ la misma base de datos, asÃ­ que todos tus datos migrarÃ¡n automÃ¡ticamente cuando estÃ© disponible.',
      },
      {
        q: 'Â¿CÃ³mo puedo dar feedback o reportar un problema?',
        a: 'PetLog estÃ¡ en desarrollo activo y tu feedback es muy valioso. Si algo no funciona como esperas o tienes una sugerencia, escrÃ­benos. Cada reporte ayuda a mejorar la experiencia para todos los dueÃ±os de mascotas.',
      },
    ],
  },
];
---

<MainLayout title="Preguntas frecuentes">

  {/* â”€â”€ HEADER â”€â”€ */}
  <div class="mb-6 animate-fade-up">
    <div class="flex items-center gap-3 mb-1">
      <a href="/salud" class="text-muted hover:text-ink transition-colors">
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
      </a>
      <p class="text-xs font-semibold text-muted uppercase tracking-widest">Centro de ayuda</p>
    </div>
    <h1 class="text-2xl font-black text-ink tracking-tight">Preguntas frecuentes</h1>
    <p class="text-sm text-muted mt-1">Todo lo que necesitas saber sobre PetLog y el Vitality Score.</p>
  </div>

  {/* â”€â”€ SECCIONES DE FAQ â”€â”€ */}
  <div class="space-y-6 animate-fade-up animate-fade-up-delay-1">
    {sections.map(section => (
      <div>
        {/* Encabezado de secciÃ³n */}
        <div class="flex items-center gap-2 mb-3">
          <span class="text-lg" aria-hidden="true">{section.emoji}</span>
          <p class="text-xs font-bold text-ink uppercase tracking-wider">{section.title}</p>
        </div>

        {/* AcordeÃ³n de preguntas */}
        <div class="rounded-2xl border border-card-border bg-card overflow-hidden divide-y divide-card-border">
          {section.questions.map((item, idx) => (
            <details class="group" id={`q-${section.title.toLowerCase().replace(/\s+/g, '-')}-${idx}`}>
              <summary class="flex items-start justify-between gap-3 px-4 py-4 cursor-pointer list-none select-none hover:bg-canvas transition-colors">
                <p class="text-sm font-semibold text-ink leading-snug pr-2">{item.q}</p>
                <svg
                  class="h-4 w-4 shrink-0 text-muted mt-0.5 transition-transform duration-200 group-open:rotate-180"
                  viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                >
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </summary>
              <div class="px-4 pb-4 pt-0">
                <p class="text-sm text-muted leading-relaxed whitespace-pre-line">{item.a}</p>
              </div>
            </details>
          ))}
        </div>
      </div>
    ))}
  </div>

  {/* â”€â”€ FOOTER â”€â”€ */}
  <div class="mt-8 rounded-2xl border border-accent/30 bg-accent/5 px-4 py-4 text-center animate-fade-up animate-fade-up-delay-2">
    <p class="text-sm font-semibold text-accent-dark mb-1">Â¿No encontraste lo que buscabas?</p>
    <p class="text-xs text-muted">El Vitality Score mejora constantemente. Si tienes una pregunta especÃ­fica o encuentras algo que no funciona como esperas, tu feedback nos ayuda a mejorar.</p>
    <a href="/salud" class="mt-3 inline-flex items-center gap-1.5 text-xs font-semibold text-accent hover:text-accent-dark transition-colors">
      <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
      Volver a Salud
    </a>
  </div>

</MainLayout>
